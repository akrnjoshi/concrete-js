image: node:7.5

cache:
  paths:
  - node_modules/

stages:
  - test

test_app:
  stage: test
  script:
    # Force git to use https to work around JHU firewall settings,
    # as recommended here:
    #   https://github.com/npm/npm/issues/5257
    - 'git config --global url."https://github.com/".insteadOf git@github.com:'
    - 'git config --global url."https://".insteadOf git://'
    - npm install
    - grunt jshint
    - karma start karma.conf.js
  tags:
  - docker
